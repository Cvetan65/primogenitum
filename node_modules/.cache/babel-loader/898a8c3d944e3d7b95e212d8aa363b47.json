{"ast":null,"code":"var _jsxFileName = \"/home/cvetan/Documents/AKTUELNO/PrevozSemanticUI/prevoz-cist/src/features/events/eventDetailed/EventDetailedPage.jsx\";\nimport React from 'react';\nimport { Grid } from 'semantic-ui-react';\nimport EventDetailedHeader from './EventDetailedHeader';\nimport EventDetailedInfo from './EventDetailedInfo';\nimport EventDetailedChat from './EventDetailedChat';\nimport EventDetailedSidebar from './EventDetailedSidebar';\nimport { useSelector, useDispatch } from 'react-redux';\nimport useFirestoreDoc from '../../../app/hooks/useFirestoreDoc';\nimport { listenToEventFromFirestore } from '../../../app/firestore/firestoreService';\nimport { listenToEvents } from '../eventActions';\nimport LoadingComponent from '../../../app/layout/LoadingComponent';\nimport { Redirect } from 'react-router-dom';\nexport default function EventDetailedPage({\n  match\n}) {\n  var _event$attendees;\n\n  const dispatch = useDispatch();\n  const {\n    currentUser\n  } = useSelector(state => state.auth);\n  const event = useSelector(state => state.event.events.find(e => e.id === match.params.id));\n  const {\n    loading,\n    error\n  } = useSelector(state => state.async);\n  const isHost = (event === null || event === void 0 ? void 0 : event.hostUid) === currentUser.uid;\n  const isGoing = event === null || event === void 0 ? void 0 : (_event$attendees = event.attendees) === null || _event$attendees === void 0 ? void 0 : _event$attendees.some(a => a.id === currentUser.uid);\n  useFirestoreDoc({\n    query: () => listenToEventFromFirestore(match.params.id),\n    data: event => dispatch(listenToEvents([event])),\n    deps: [match.params.id, dispatch]\n  });\n  if (loading || !event && !error) return /*#__PURE__*/React.createElement(LoadingComponent, {\n    content: \"Loading event...\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 12\n    }\n  });\n  if (error) return /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 21\n    }\n  });\n  return /*#__PURE__*/React.createElement(Grid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 10,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(EventDetailedHeader, {\n    event: event,\n    isGoing: isGoing,\n    isHost: isHost,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(EventDetailedInfo, {\n    event: event,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(EventDetailedChat, {\n    eventId: event.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Grid.Column, {\n    width: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(EventDetailedSidebar, {\n    attendees: event === null || event === void 0 ? void 0 : event.attendees,\n    hostUid: event.hostUid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }\n  })));\n}","map":{"version":3,"sources":["/home/cvetan/Documents/AKTUELNO/PrevozSemanticUI/prevoz-cist/src/features/events/eventDetailed/EventDetailedPage.jsx"],"names":["React","Grid","EventDetailedHeader","EventDetailedInfo","EventDetailedChat","EventDetailedSidebar","useSelector","useDispatch","useFirestoreDoc","listenToEventFromFirestore","listenToEvents","LoadingComponent","Redirect","EventDetailedPage","match","dispatch","currentUser","state","auth","event","events","find","e","id","params","loading","error","async","isHost","hostUid","uid","isGoing","attendees","some","a","query","data","deps"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Grid } from 'semantic-ui-react';\nimport EventDetailedHeader from './EventDetailedHeader';\nimport EventDetailedInfo from './EventDetailedInfo';\nimport EventDetailedChat from './EventDetailedChat';\nimport EventDetailedSidebar from './EventDetailedSidebar';\nimport { useSelector, useDispatch } from 'react-redux';\nimport useFirestoreDoc from '../../../app/hooks/useFirestoreDoc';\nimport { listenToEventFromFirestore } from '../../../app/firestore/firestoreService';\nimport { listenToEvents } from '../eventActions';\nimport LoadingComponent from '../../../app/layout/LoadingComponent';\nimport { Redirect } from 'react-router-dom';\n\nexport default function EventDetailedPage({ match }) {\n  const dispatch = useDispatch();\n  const { currentUser } = useSelector((state) => state.auth);\n  const event = useSelector((state) =>\n    state.event.events.find((e) => e.id === match.params.id)\n  );\n  const { loading, error } = useSelector((state) => state.async);\n  const isHost = event?.hostUid === currentUser.uid;\n  const isGoing = event?.attendees?.some(a => a.id === currentUser.uid);\n\n  useFirestoreDoc({\n    query: () => listenToEventFromFirestore(match.params.id),\n    data: (event) => dispatch(listenToEvents([event])),\n    deps: [match.params.id, dispatch],\n  });\n\n  if (loading || (!event && !error))\n    return <LoadingComponent content='Loading event...' />;\n\n  if (error) return <Redirect to='/error' />;\n\n  return (\n    <Grid>\n      <Grid.Column width={10}>\n        <EventDetailedHeader event={event} isGoing={isGoing} isHost={isHost} />\n        <EventDetailedInfo event={event} />\n        <EventDetailedChat eventId={event.id} />\n      </Grid.Column>\n      <Grid.Column width={6}>\n        <EventDetailedSidebar attendees={event?.attendees} hostUid={event.hostUid} />\n      </Grid.Column>\n    </Grid>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}