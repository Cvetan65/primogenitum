{"ast":null,"code":"import { useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport { asyncActionStart, asyncActionError, asyncActionFinish } from '../async/asyncReducer';\nimport { dataFromSnapshot } from '../firestore/firestoreService';\nexport default function useFirestoreCollection({\n  query,\n  data,\n  deps\n}) {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(asyncActionStart());\n    const unsubscribe = query().onSnapshot(snapshot => {\n      const docs = snapshot.docs.map(doc => dataFromSnapshot(doc));\n      data(docs);\n      dispatch(asyncActionFinish());\n    }, error => dispatch(asyncActionError(error)));\n    return () => {\n      unsubscribe();\n    };\n  }, deps); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"sources":["/home/cvetan/Documents/AKTUELNO/revents-master-14/cista/revents-4a7a2c1fc0de9971a68b4bb68ad6fa71370a6c80/src/app/hooks/useFirestoreCollection.js"],"names":["useDispatch","useEffect","asyncActionStart","asyncActionError","asyncActionFinish","dataFromSnapshot","useFirestoreCollection","query","data","deps","dispatch","unsubscribe","onSnapshot","snapshot","docs","map","doc","error"],"mappings":"AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,gBAAT,EAA2BC,gBAA3B,EAA6CC,iBAA7C,QAAsE,uBAAtE;AACA,SAASC,gBAAT,QAAiC,+BAAjC;AAEA,eAAe,SAASC,sBAAT,CAAgC;AAACC,EAAAA,KAAD;AAAQC,EAAAA,IAAR;AAAcC,EAAAA;AAAd,CAAhC,EAAqD;AAChE,QAAMC,QAAQ,GAAGV,WAAW,EAA5B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZS,IAAAA,QAAQ,CAACR,gBAAgB,EAAjB,CAAR;AACA,UAAMS,WAAW,GAAGJ,KAAK,GAAGK,UAAR,CAChBC,QAAQ,IAAI;AACR,YAAMC,IAAI,GAAGD,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkBC,GAAG,IAAIX,gBAAgB,CAACW,GAAD,CAAzC,CAAb;AACAR,MAAAA,IAAI,CAACM,IAAD,CAAJ;AACAJ,MAAAA,QAAQ,CAACN,iBAAiB,EAAlB,CAAR;AACH,KALe,EAMhBa,KAAK,IAAIP,QAAQ,CAACP,gBAAgB,CAACc,KAAD,CAAjB,CAND,CAApB;AAQA,WAAO,MAAM;AACTN,MAAAA,WAAW;AACd,KAFD;AAGH,GAbQ,EAaNF,IAbM,CAAT,CAHgE,CAgBvD;AACZ","sourcesContent":["import { useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport { asyncActionStart, asyncActionError, asyncActionFinish } from '../async/asyncReducer';\nimport { dataFromSnapshot } from '../firestore/firestoreService';\n\nexport default function useFirestoreCollection({query, data, deps}) {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(asyncActionStart());\n        const unsubscribe = query().onSnapshot(\n            snapshot => {\n                const docs = snapshot.docs.map(doc => dataFromSnapshot(doc));\n                data(docs);\n                dispatch(asyncActionFinish());\n            },\n            error => dispatch(asyncActionError(error))\n        );\n        return () => {\n            unsubscribe()\n        }\n    }, deps) // eslint-disable-line react-hooks/exhaustive-deps\n}"]},"metadata":{},"sourceType":"module"}