{"ast":null,"code":"import { useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport { asyncActionStart, asyncActionError, asyncActionFinish } from '../async/asyncReducer';\nimport { dataFromSnapshot } from '../firestore/firestoreService';\nexport default function useFirestoreDoc({\n  query,\n  data,\n  deps,\n  shouldExecute = true\n}) {\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (!shouldExecute) return;\n    dispatch(asyncActionStart());\n    const unsubscribe = query().onSnapshot(snapshot => {\n      if (!snapshot.exists) {\n        dispatch(asyncActionError({\n          code: 'not-found',\n          message: 'Could not find document'\n        }));\n        return;\n      }\n\n      data(dataFromSnapshot(snapshot));\n      dispatch(asyncActionFinish());\n    }, error => dispatch(asyncActionError()));\n    return () => {\n      unsubscribe();\n    };\n  }, deps); // eslint-disable-line react-hooks/exhaustive-deps\n}","map":{"version":3,"sources":["/home/cvetan/Documents/AKTUELNO/revents-master-14/cista/revents-4a7a2c1fc0de9971a68b4bb68ad6fa71370a6c80/src/app/hooks/useFirestoreDoc.js"],"names":["useDispatch","useEffect","asyncActionStart","asyncActionError","asyncActionFinish","dataFromSnapshot","useFirestoreDoc","query","data","deps","shouldExecute","dispatch","unsubscribe","onSnapshot","snapshot","exists","code","message","error"],"mappings":"AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,SAASC,gBAAT,EAA2BC,gBAA3B,EAA6CC,iBAA7C,QAAsE,uBAAtE;AACA,SAASC,gBAAT,QAAiC,+BAAjC;AAEA,eAAe,SAASC,eAAT,CAAyB;AAACC,EAAAA,KAAD;AAAQC,EAAAA,IAAR;AAAcC,EAAAA,IAAd;AAAoBC,EAAAA,aAAa,GAAG;AAApC,CAAzB,EAAoE;AAC/E,QAAMC,QAAQ,GAAGX,WAAW,EAA5B;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAI,CAACS,aAAL,EAAoB;AACpBC,IAAAA,QAAQ,CAACT,gBAAgB,EAAjB,CAAR;AACA,UAAMU,WAAW,GAAGL,KAAK,GAAGM,UAAR,CAChBC,QAAQ,IAAI;AACR,UAAI,CAACA,QAAQ,CAACC,MAAd,EAAsB;AAClBJ,QAAAA,QAAQ,CAACR,gBAAgB,CAAC;AAACa,UAAAA,IAAI,EAAE,WAAP;AAAoBC,UAAAA,OAAO,EAAE;AAA7B,SAAD,CAAjB,CAAR;AACA;AACH;;AACDT,MAAAA,IAAI,CAACH,gBAAgB,CAACS,QAAD,CAAjB,CAAJ;AACAH,MAAAA,QAAQ,CAACP,iBAAiB,EAAlB,CAAR;AACH,KARe,EAShBc,KAAK,IAAIP,QAAQ,CAACR,gBAAgB,EAAjB,CATD,CAApB;AAWA,WAAO,MAAM;AACTS,MAAAA,WAAW;AACd,KAFD;AAGH,GAjBQ,EAiBNH,IAjBM,CAAT,CAH+E,CAoBtE;AACZ","sourcesContent":["import { useDispatch } from 'react-redux';\nimport { useEffect } from 'react';\nimport { asyncActionStart, asyncActionError, asyncActionFinish } from '../async/asyncReducer';\nimport { dataFromSnapshot } from '../firestore/firestoreService';\n\nexport default function useFirestoreDoc({query, data, deps, shouldExecute = true}) {\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        if (!shouldExecute) return;\n        dispatch(asyncActionStart());\n        const unsubscribe = query().onSnapshot(\n            snapshot => {\n                if (!snapshot.exists) {\n                    dispatch(asyncActionError({code: 'not-found', message: 'Could not find document'}));\n                    return;\n                }\n                data(dataFromSnapshot(snapshot));\n                dispatch(asyncActionFinish());\n            },\n            error => dispatch(asyncActionError())\n        );\n        return () => {\n            unsubscribe()\n        }\n    }, deps) // eslint-disable-line react-hooks/exhaustive-deps\n}"]},"metadata":{},"sourceType":"module"}